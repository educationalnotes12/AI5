from collections import deque

class Graph:
    def __init__(self,n):
        self.n=n
        self.matrix=[[0]*n for _ in range(n)]
        self.list={chr(65+i):[] for i in range(n)}

    def add_edge(self,u,v):
        i=ord(u)-65
        j=ord(v)-65
        self.matrix[i][j]=1
        self.matrix[j][i]=1
        self.list[u].append(v)
        self.list[v].append(u)

    def dfs(self,start,visited):
        i=ord(start)-65
        print(start,end=" ")
        visited[i]=1
        for j in range(self.n):
            if self.matrix[i][j]==1 and not visited[j]:
                self.dfs(chr(65+j),visited)

    def bfs(self,start):
        visited={x:0 for x in self.list}
        q=deque([start])
        visited[start]=1
        while q:
            node=q.popleft()
            print(node,end=" ")
            for n in self.list[node]:
                if not visited[n]:
                    visited[n]=1
                    q.append(n)

n=int(input("Enter number of locations: "))
g=Graph(n)
e=int(input("Enter number of routes: "))
for _ in range(e):
    u,v=input("Enter route (e.g. A B): ").split()
    g.add_edge(u,v)

print("\nDFS Traversal (Adjacency Matrix):")
visited=[0]*n
g.dfs('A',visited)

print("\nBFS Traversal (Adjacency List):")
g.bfs('A')
